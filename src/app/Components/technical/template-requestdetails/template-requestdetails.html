<div class="request-actions">
  @if(url==="/RequestDetailsalltech"){
  <button
    class="btn btn-apply"
    (click)="confirmApprovalWithPasswordApply(item)"
  >
    <i class="fas fa-paper-plane"></i>
    تقديم الآن
  </button>
  } @else {
  <button class="btn btn-reject" (click)="rejectApprovalWithPassword(item)">
    <i class="fas fa-times-circle"></i>
    رفض الطلب
  </button>
  <!-- <button class="btn btn-approve" (click)="confirmApprovalWithPassword(item)">
    <i class="fas fa-check-circle"></i>
    موافقة على الطلب
  </button> -->
  }
</div>

<div class="card w-100" style="max-width: 600px">
  <div class="card-header pb-3">
    <h2 class="card-title">تفاصيل المشكلة</h2>
  </div>
  <div class="card-body">
    <div class="row g-4">
      @if(item?.requestImageUrl==""){
      <div
        class="col-md-6 d-flex flex-column align-items-center justify-content-center"
      >
        <img
          src="{{ item?.requestImageUrl }}"
          alt="صورة المشكلة"
          class="img-fluid"
        />
        <p class="text-muted mt-2" style="font-size: 0.9em">
          صورة توضيحية للمشكلة
        </p>
      </div>
      }
      <div class="col-md-6 col-12">
        <div class="mb-3">
          <h3 class="font-weight-bold h5">الوصف:</h3>
          <p class="text-muted">
            {{ item?.description }}
          </p>
        </div>
        <div class="separator"></div>
        <div class="d-grid gap-2">
          <div class="d-flex justify-content-between align-items-center">
            <span class="font-weight-bold">النوع:</span>
            <span class="badge badge-secondary-custom"
              >{{ item?.category }}
            </span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span class="font-weight-bold">الحالة:</span>
            <span class="badge badge-outline-custom">قيد الانتظار</span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span class="font-weight-bold">تاريخ الإبلاغ:</span>
            <span class="text-muted">
              {{ item?.timeStamp | date : "yyyy/MM/dd" }}
            </span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span class="font-weight-bold">المبلغ عنه بواسطة:</span>
            <span class="text-muted">{{ item?.carOwnerName }}</span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span class="font-weight-bold">الموقع:</span>
            <span class="text-muted">
              <a
                href="https://www.google.com/maps/search/?api=1&query={{
                  item?.latitude
                }},{{ item?.longitude }}"
                target="_blank"
                rel="noopener noreferrer"
              >
                عرض على الخريطة
              </a>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="card-footer d-flex flex-column flex-sm-row justify-content-end gap-2"
  >
    @if(url==="/technician/requestdetailsalltech"){
    <button
      class="btn btn-outline-warning"
      (click)="confirmApprovalWithPasswordApply(item)"
    >
      تقديم الآن
    </button>
    }@else{

    <button
      class="btn btn-outline-danger"
      (click)="rejectApprovalWithPassword(item)"
    >
      رفض المشكلة
    </button>
    <!-- <button
      class="btn btn-outline-success"
      (click)="confirmApprovalWithPassword(item)"
    >
      الموافقة على الإصلاح
    </button> -->

    }
  </div>
</div>
